<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Asistencia Grupal - Jefes de Grupo</title>

    <link rel="stylesheet"  href="{{ url_for('static', filename='style.css') }}">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="container">
        <div id="auth-section" class="card">
            <div class="profile-icon-container">
                <div class="profile-icon">üë§</div>
            </div>
            <h1>Residente de Grupo</h1>
            <p>INICIAR SESION</p>
            
            <div class="input-group">
                <input type="text" id="login-nombre" placeholder="Nombre Completo" required>
            </div>
            <div class="input-group">
                <input type="password" id="login-pass" placeholder="Contrase√±a" required>
            </div>
            
            <button onclick="iniciarSesion()" class="btn-login">LOGIN</button>
        </div>

        <div id="attendance-section" class="card" style="display: none;">
            <header>
                <h2 id="user-display"></h2>
                <div class="step-indicator">
                    <span id="step-dot-1" class="dot active"></span>
                    <span id="step-dot-2" class="dot"></span>
                </div>
            </header>

            <div id="paso-0">
                <h3>1. Seleccionar Servicio</h3>
                <p class="subtitle">Ingrese el N¬∞ de Orden (OC)</p>

                <input type="text" id="input-oc" placeholder="INGRESAR OC" autocomplete="off">
                <div id="oc-sugerencias" class="sugerencias"></div>

                <button class="btn-next" onclick="confirmarServicio()">Siguiente ‚ûî</button>
            </div>


            <div id="paso-1" style= "display: none;">
                <h3>1. Lista de Integrantes</h3>
                <p class="subtitle">Escanee QR</p>
                
                <div id="lista-integrantes">
                    
                    <div class="fila-trabajador">
                        <input type="text" class="integrante-nombre" placeholder="Nombre (VIA QR)" readonly>
                        <input type="hidden" class="integrante-dni">
                        <input type="hidden" class="integrante-cargo">
                        
                        <button class="btn-scan" onclick="abrirEscanner(this)" title="Escanear QR">üì∑</button>
                        <button class="btn-remove" onclick="this.parentElement.remove()" title="Quitar">√ó</button>
                    </div>
                </div>

                <button class="btn-add" onclick="agregarFila()">+ A√±adir otro integrante</button>
                
                <div class="nav-actions">
                    <button class="btn-next" onclick="irAPaso(2)">Siguiente: Fotos ‚ûî</button>
                </div>
            </div>

            <div id="paso-2" style="display: none;">
                <h3>2. Evidencia Visual</h3>
                <p class="subtitle">Capture las fotos obligatorias</p>

                <div class="tipo-registro-container" style="margin-bottom: 20px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                    <p style="font-size: 14px; margin-bottom: 10px; color: #00d2ff;">¬øQu√© reporte enviar√°?</p>
                    <div style="display: flex; justify-content: space-around;">
                        <label style="cursor: pointer;">
                            <input type="radio" name="tipo_evento" value="ENTRADA" checked> ENTRADA
                        </label>
                        <label style="cursor: pointer;">
                            <input type="radio" name="tipo_evento" value="SALIDA"> SALIDA
                        </label>
                    </div>
                </div>

                <div class="photo-upload-container">
                    <div class="photo-field">
                        <label for="foto-grupo">üì∏ Foto Grupal</label>
                        <input type="file" id="foto-grupo" accept="image/*" capture="camera">
                    </div>
                    <div class="photo-field">
                        <label for="foto-doc">üìÑ Foto ATS</label>
                        <input type="file" id="foto-doc" accept="image/*" capture="camera">
                    </div>
                </div>

                <div class="nav-actions split">
                    <button class="btn-back" onclick="irAPaso(1)">‚¨Ö Volver</button>
                    <button id="btn-marcar" class="btn-gps" onclick="obtenerUbicacion()">GUARDAR REPORTE</button>
                </div>
            </div>

            <p id="status-msg"></p>
        </div>
    </div>

    <div id="qr-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center; flex-direction: column;">
        <div id="reader" style="width: 320px; background: white; border-radius: 15px; overflow: hidden; border: 4px solid #00d2ff;"></div>
        <button onclick="cerrarEscanner()" style="margin-top: 25px; width: auto; background: #ff4d4d; color: white; padding: 12px 30px; border-radius: 8px; font-weight: bold;">CERRAR C√ÅMARA</button>
    </div>

    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>